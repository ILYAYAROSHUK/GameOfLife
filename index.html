<!doctype html><html lang="en"><head><meta charset="UTF-8"><link rel="stylesheet" href="index.css"><script src="index.js"></script><script defer="defer" src="/GameOfLife/static/js/main.31d6cfe0.js"></script></head><body><div id="game"><div class="control-panel"><div class="logo-container"><div class="logo"></div></div><button class="ctrl-button" id="ctrl_1">Start</button> <button class="ctrl-button" id="ctrl_2">Create world</button> <button class="ctrl-button" id="ctrl_3">Reset</button></div><canvas id="world"></canvas><div class="info-panel"><span class="info_generation">Generation: </span><span id="info_generation">0</span> <span class="separator">|</span> <span class="info_life-cell">Life cell: </span><span id="info_life-cell">0</span> <span class="separator">|</span> <span class="info_speed">Speed: </span><span id="info_speed">0</span> <span>ms</span></div></div><script>let GameOfLife=function(){function t(t){this.canvas=t.canvas,this.unitSize=t.unitSize,this.columns=t.columns,this.lines=t.lines,this.drawRate=t.drawRate,this.gridSize=t.gridSize,this.width=this.canvas.width=this.unitSize*this.columns,this.height=this.canvas.height=this.unitSize*this.lines,this.ctx=this.canvas.getContext("2d"),this.infoPanel=t.infoPanel,this.infoPanel.style.width=this.width-12+"px",this.infoGeneration=t.infoGeneration,this.infoLifeCell=t.infoLifeCell,this.infoSpeed=t.infoSpeed,this.oldState=[],this.newState=[],this.useState=[],this.gameOn=!1,this.counter=0,this.lifeCell=0,this.gameBox=t.gameBox,this.gameBoxSize={w:this.gameBox.clientWidth,h:this.gameBox.clientHeight}}return t.prototype.init=function(){for(let t=0;t<this.columns;t++){this.oldState[t]=[],this.newState[t]=[],this.useState[t]=[];for(let e=0;e<this.lines;e++)this.newState[t][e]=!1,this.oldState[t][e]=!1,this.useState[t][e]=!1}},t.prototype.randomDraft=function(){for(let t=0;t<this.columns;t++){this.oldState[t]=[],this.newState[t]=[],this.useState[t]=[];for(let e=0;e<this.lines;e++){let i=Math.random()<.075;this.newState[t][e]=i,this.oldState[t][e]=i,this.useState[t][e]=!1}}this.update(),this.counter=0},t.prototype.update=function(){for(let t=0;t<this.columns;t++)for(let e=0;e<this.lines;e++)this.newState[t][e]=this.updateState(t,e);for(let t=0;t<this.newState.length;t++)for(let e=0;e<this.newState[t].length;e++)this.oldState[t][e]=!!this.newState[t][e];this.counter++},t.prototype.updateState=function(t,e){let i=0,n=t-1>=0,s=t+1<this.columns,h=e-1>=0,o=e+1<this.lines;return n&&h&&this.oldState[t-1][e-1]&&i++,n&&this.oldState[t-1][e]&&i++,n&&o&&this.oldState[t-1][e+1]&&i++,s&&h&&this.oldState[t+1][e-1]&&i++,s&&this.oldState[t+1][e]&&i++,s&&o&&this.oldState[t+1][e+1]&&i++,h&&this.oldState[t][e-1]&&i++,o&&this.oldState[t][e+1]&&i++,this.oldState[t][e]&&2===i||this.oldState[t][e]&&3===i||!this.oldState[t][e]&&3===i},t.prototype.draw=function(){this.lifeCell=0,this.ctx.clearRect(0,0,this.width,this.height),this.drawGrid();for(let t=0;t<this.columns;t++)for(let e=0;e<this.lines;e++)this.useState[t][e]&&(this.ctx.beginPath(),this.ctx.fillStyle="rgba(104,159,56,.1)",this.ctx.fillRect(t*this.unitSize,e*this.unitSize,this.unitSize,this.unitSize),this.ctx.closePath());for(let t=0;t<this.columns;t++)for(let e=0;e<this.lines;e++)this.newState[t][e]&&(this.lifeCell++,this.useState[t][e]=!0,this.ctx.beginPath(),this.ctx.fillStyle="rgba(236,64,122,1)",this.ctx.fillRect(t*this.unitSize,e*this.unitSize,this.unitSize,this.unitSize),this.ctx.closePath())},t.prototype.addUnit=function(t,e){let i=Math.floor(t/this.unitSize),n=Math.floor(e/this.unitSize);this.newState[i][n]=!this.newState[i][n],this.oldState[i][n]=!this.oldState[i][n]},t.prototype.gg=function(){this.gameOn=!this.gameOn},t.prototype.start=function(){this.init(),this.draw(),setInterval(this.tick,this.drawRate,this)},t.prototype.tick=function(t){t.gameOn&&t.update(),t.infoGeneration.innerHTML=t.getGeneration(),t.infoLifeCell.innerHTML=t.getLifeCell(),t.infoSpeed.innerHTML=t.getSpeed(),t.draw(),t.grid=t.state},t.prototype.getWorldSize=function(){return{w:this.width,h:this.height}},t.prototype.getGeneration=function(){return this.counter},t.prototype.getLifeCell=function(){return this.lifeCell},t.prototype.getSpeed=function(){return Math.round(this.drawRate)},t.prototype.drawGrid=function(){let t=this.height/this.unitSize/this.gridSize,e=this.width/this.unitSize/this.gridSize;for(let e=0;e<t;e++)this.ctx.beginPath(),this.ctx.moveTo(0,e*this.gridSize*this.unitSize-.5),this.ctx.lineTo(this.width,e*this.gridSize*this.unitSize-.5),this.ctx.strokeStyle=e%5?"rgba(66,66,66,.2)":"rgba(66,66,66,.7)",this.ctx.stroke(),this.ctx.closePath();for(let t=0;t<e;t++)this.ctx.beginPath(),this.ctx.moveTo(t*this.gridSize*this.unitSize-.5,0),this.ctx.lineTo(t*this.gridSize*this.unitSize-.5,this.height),this.ctx.strokeStyle=t%5?"rgba(66,66,66,.2)":"rgba(66,66,66,.7)",this.ctx.stroke(),this.ctx.closePath()},t.prototype.reset=function(){this.init(),this.gameOn=!1,this.counter=0,this.lifeCell=0},t}(),c=document.getElementById("world"),startButton=document.getElementById("ctrl_1"),generateWorld=document.getElementById("ctrl_2"),resetWorld=document.getElementById("ctrl_3"),infoPanel=document.getElementsByClassName("info-panel")[0],infoGeneration=document.getElementById("info_generation"),infoLifeCell=document.getElementById("info_life-cell"),infoSpeed=document.getElementById("info_speed"),gameBox=document.getElementById("game"),gameOfLife=new GameOfLife({canvas:c,unitSize:2,columns:180,lines:120,drawRate:62.5,gridSize:4,infoPanel:infoPanel,infoGeneration:infoGeneration,infoLifeCell:infoLifeCell,infoSpeed:infoSpeed,gameBox:gameBox});gameOfLife.start(),c.addEventListener("click",(function(t){gameOfLife.addUnit(t.offsetX,t.offsetY)})),startButton.addEventListener("click",(function(t){gameOfLife.gg()})),generateWorld.addEventListener("click",(function(t){gameOfLife.randomDraft()})),resetWorld.addEventListener("click",(function(t){gameOfLife.reset()}))</script></body></html>